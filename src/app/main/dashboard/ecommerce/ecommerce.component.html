<div class="content-wrapper container-xxl p-0">
  <div class="content-body">
    <div class="row match-height mb-2" *ngIf="isAdmin || isClient">
      <!-- Medal Card -->
      <div class="col-xl-4 col-md-6 col-12">
        <div class="card card-congratulation-medal">
          <div class="card-body">
            <h5>Bienvenido 🎉 !</h5>
            <div class="d-flex flex-column ">
              <div class="user-info mb-1">
                <h4 class="mb-0">{{ currentUser?.firstName }}</h4>
                <span class="card-text">jhonp@gmail.com</span>
              </div>
              
            </div>
            
            <h6 class="mb-75 mt-2">
              <a href="javascript:void(0);">Plan Plan 2 </a>
              <br>
              <a href="javascript:void(0);">(10) Licencias</a>
            </h6>
            
            <button type="button" class="btn btn-primary" rippleEffect>Ver Licencias</button>
            <img src="assets/images/illustration/badge.svg" class="congratulation-medal" alt="Medal Pic" />
          </div>
        </div>
      </div>
      <!--/ Medal Card -->

      <!-- Statistics Card -->
      <div class="col-xl-8 col-md-6 col-12">
        <div class="card card-statistics">
          <div class="card-header">
            <h4 class="card-title">Principales Indicadores <a href="#" style="font-size: 12px;" (click)="emitEventToChild(true)">(Personalice)</a> </h4>
            <div class="d-flex align-items-center">
              <p class="card-text font-small-2 mr-25 mb-0">Trimestre: Del 1 de Enero de 2022 al 31 de Marzo de 2022</p>
            </div>
          </div>
          <div class="card-body statistics-body" style="padding-top: 1rem !important;padding-top: 1.5rem !important;">
            <div class="row">
              <div class="col-sm-6 col-xl-6 mb-xl-0 mb-2">
                <div class="media mb-2">
                  
                  <div class="avatar bg-light-success mr-2">
                    <div class="avatar-content">{{ 'Razón Corriente' | initials }}</div>
                  </div>
                  <div class="media-body my-auto">
                    <h6 class="font-weight-bolder mb-0">Razón Corriente</h6>
                    <p class="card-text font-small-3 mb-0">1.24</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-6 mb-2">
                <div class="media mb-2">
                  <div class="avatar bg-light-success mr-2">
                    <div class="avatar-content">{{ 'Prueba Ácida' | initials }}</div>
                  </div>
                  <div class="media-body my-auto">
                    <h6 class="font-weight-bolder mb-0">Prueba Ácida</h6>
                    <p class="card-text font-small-3 mb-0">1.19</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-6 mb-2 mb-xl-0">
                <div class="media">
                  <div class="avatar bg-light-primary mr-2">
                    <div class="avatar-content">{{ 'Periodo promedio de cobro' | initials }}</div>
                  </div>
                  <div class="media-body my-auto">
                    <h6 class="font-weight-bolder mb-0">Periodo promedio de cobro</h6>
                    <p class="card-text font-small-3 mb-0">34.88</p>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-xl-6 mb-2 mb-sm-0">
                <div class="media">
                  <div class="avatar bg-light-primary mr-2">
                    <div class="avatar-content">{{ 'Periodo promedio de pago' | initials }}</div>
                  </div>
                  <div class="media-body my-auto">
                    <h6 class="font-weight-bolder mb-0">Periodo promedio de pago</h6>
                    <p class="card-text font-small-3 mb-0">46.50</p>
                  </div>
                </div>
              </div>
              
            </div>
          </div>
        </div>
      </div>
      <!--/ Statistics Card -->
    </div>

    <div class="row match-height mb-2" *ngIf="isAdmin">
      <!-- Developer Meetup Card -->
      <div class="col-lg-4 col-md-6 col-12">
        <div class="card card-developer-meetup">
          <div class="bg-light-primary rounded-top text-center">
            <img src="assets/images/illustration/email.svg" alt="Meeting Pic" height="170" />
          </div>
          <div class="card-body">
            <div class="meetup-header d-flex align-items-center">
              <div class="meetup-day">
                <div class="avatar-content">
                  <i data-feather="clock" class="font-large-1"></i>
                </div>
              </div>
              <div class="my-auto">
                <h5 class="card-title mb-25"><b>Última Actualización</b></h5>
                <p class="card-text mb-0">Trimestral</p>
              </div>
            </div>
            <div class="media">
              <div class="avatar bg-light-primary rounded mr-1">
                <div class="avatar-content">
                  <i data-feather="calendar" class="avatar-icon font-medium-3"></i>
                </div>
              </div>
              <div class="media-body">
                <h6 class="mb-0"><b>Periodo Inicial</b></h6>
                <small>1 de enero 2022</small>
              </div>
            </div>
            <div class="media">
              <div class="avatar bg-light-primary rounded mr-1">
                <div class="avatar-content">
                  <i data-feather="calendar" class="avatar-icon font-medium-3"></i>
                </div>
              </div>
              <div class="media-body">
                <h6 class="mb-0"><b>Periodo Final</b></h6>
                <small>31 de marzo 2022</small>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--/ Developer Meetup Card -->
      <div class="col-lg-8 col-12">
        <!-- Revenue Report Card -->
        <div class="card card-revenue-budget">
          <div class="row mx-0">
            <div class="col-md-8 col-12 revenue-report-wrapper">
              <div class="d-sm-flex justify-content-between align-items-center mb-3">
                <h4 class="card-title mb-50 mb-sm-0">Reporte evolutivo</h4>
                <div class="d-flex align-items-center">
                  <div class="d-flex align-items-center mr-2">
                    <div ngbDropdown class="chart-dropdown">
                      <button
                        rippleEffect
                        class="btn btn-sm border-0 p-50"
                        ngbDropdownToggle
                        type="button"
                        id="dropdownItem4"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false"
                      >
                        Razón Corriente
                      </button>
                      <div ngbDropdownMenu class="dropdown-menu-right" aria-labelledby="dropdownItem4">
                        <a ngbDropdownItem href="javascript:void(0);">Prueba Ácida</a>
                        <a ngbDropdownItem href="javascript:void(0);">Periodo promedio de cobro</a>
                        <a ngbDropdownItem href="javascript:void(0);">Periodo promedio de pago</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div id="revenue-report-chart" #revenueReportChartRef>
                <apx-chart
                  [series]="data.revenueReport.earningExpenseChart.series"
                  [chart]="{
                    height: 230,
                    width:
                      isMenuToggled === false
                        ? revenueReportChartRef.offsetWidth
                        : revenueReportChartoptions.chart.width,
                    stacked: true,
                    type: 'bar',
                    toolbar: { show: false }
                  }"
                  [plotOptions]="revenueReportChartoptions.plotOptions"
                  [colors]="revenueReportChartoptions.colors"
                  [dataLabels]="revenueReportChartoptions.dataLabels"
                  [legend]="revenueReportChartoptions.legend"
                  [grid]="revenueReportChartoptions.grid"
                  [xaxis]="revenueReportChartoptions.xaxis"
                  [yaxis]="revenueReportChartoptions.yaxis"
                ></apx-chart>
              </div>
            </div>
            <div class="col-md-4 col-12 budget-wrapper">
              <div class="btn-group">
                <div ngbDropdown>
                  <button
                    type="button"
                    class="btn btn-outline-primary btn-sm dropdown-toggle budget-dropdown"
                    data-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                    ngbDropdownToggle
                    rippleEffect
                  >
                    El Bambino
                  </button>
                  <div ngbDropdownMenu>
                    <a ngbDropdownItem href="javascript:void(0);">Empresa 1</a>
                    <a ngbDropdownItem href="javascript:void(0);">Empresa 2</a>
                    <a ngbDropdownItem href="javascript:void(0);">Empresa 3</a>
                  </div>
                </div>
              </div>
              <h2 class="mb-25">Indicadores financieros</h2>
              
              <div id="budget-chart" #budgetChartRef>
                <apx-chart
                  [series]="data.revenueReport.budgetChart.series"
                  [chart]="{
                    height: 80,
                    width: isMenuToggled === false ? budgetChartRef.offsetWidth : budgetChartoptions.chart.width,
                    toolbar: { show: false },
                    zoom: { enabled: false },
                    type: 'line',
                    sparkline: { enabled: true }
                  }"
                  [stroke]="budgetChartoptions.stroke"
                  [colors]="['#39A330', '#dcdae3']"
                  [tooltip]="budgetChartoptions.tooltip"
                ></apx-chart>
              </div>
              <button type="button" class="btn btn-primary" rippleEffect>Ver Indicadores</button>
            </div>
          </div>
        </div>
        <!--/ Revenue Report Card -->
      </div>
    </div>

    <div class="row match-height" *ngIf="isAdmin">
      <!-- Company Table -->
      <div class="col-lg-8 col-12">
        <div class="card card-company-table">
          <div class="card-body p-0">
            <div class="table-responsive">
          
               <ngx-datatable
                    class="bootstrap core-bootstrap"
                    [headerHeight]="40"
                    [rowHeight]="58"
                    [limit]="5"
                    [columnMode]="ColumnMode.force"
                    [footerHeight]="50"
                    [rows]="rows.indicator"
                    [scrollbarH]="true"
                    >
                      <ngx-datatable-column name="Descripción" prop="full_name" [width]="250">
                        <ng-template let-row="row" let-name="value" ngx-datatable-cell-template>
                          <div class="d-flex align-items-center">
                            <div *ngIf="row.avatar.length > 0; else customAvatar">
                              <img
                                class="rounded-circle mr-1"
                                src="assets/images/portrait/small/{{ row.avatar }}"
                                height="32"
                                width="32"
                                alt="datatable-avatar"
                              />
                            </div>
                            <ng-template #customAvatar>
                              <div
                                class="avatar mr-1 ml-0"
                                [ngClass]="{
                                  'bg-light-success': '2' >= row.id,
                                  'bg-light-primary': row.id >= '3'
                                }"
                              >
                                <div class="avatar-content">{{ row.salary | initials }}</div>
                              </div>
                            </ng-template>
                            <div class="cell-line-height">
                              <p class="font-medium-1 font-weight-bold line-height-1 mb-25">
                                {{ row.salary }}
                              </p>
                              <span class="text-muted font-small-2"> {{ row.post }}</span>
                            </div>
                          </div>
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Licencias" prop="full_name" [width]="50">
                        <ng-template let-row="row" let-name="value" ngx-datatable-cell-template>
                          
                          <div *ngIf="row.city == 'error'"
                            class="badge badge-pill badge-light-danger">
                            {{ row.city }}
                            
                          </div>

                          <span *ngIf="row.city != 'error'">{{
                            row.city
                          }}</span>
                        </ng-template>
                      </ngx-datatable-column>

                     
                      
                    </ngx-datatable>
              
            </div>

            <a href="#" class="ml-2" style="font-size: 12px;" (click)="emitEventToChild(false)">(Personalice)</a>
          </div>
        </div>
      </div>
      <!--/ Company Table -->

      

      <div class="col-lg-4 col-md-6 col-12">
        <div class="card card-developer-meetup">
          <div class="bg-light-primary rounded-top text-center">
            <img src="assets/images/illustration/api.svg" alt="Meeting Pic" height="170" />
          </div>
          <div class="card-body text-center budget-wrapper">
            <h5 class="card-title mb-2">Trimestre: Del 1 de Enero de 2022 al 31 de Marzo de 2022</h5>
            <div class="d-flex mt-2">
              <div id="budget-chart flex-column" #budgetChartRef>
                <apx-chart
                  [series]="data.revenueReport.budgetChart.series"
                  [chart]="{
                    height: 80,
                   
                    toolbar: { show: false },
                    zoom: { enabled: false },
                    type: 'line',
                    sparkline: { enabled: true }
                  }"
                  [stroke]="budgetChartoptions.stroke"
                  [colors]="budgetChartoptions.colors"
                  [tooltip]="budgetChartoptions.tooltip"
                ></apx-chart>
              </div>
            </div>
            <button type="button" class="btn btn-primary mt-1" rippleEffect>Ver Indicadores</button>
          </div>
          
        </div>
      </div>

     
    </div>
  </div>
</div>

<app-modal-list-indicators [events]="eventsSubject.asObservable()"></app-modal-list-indicators>